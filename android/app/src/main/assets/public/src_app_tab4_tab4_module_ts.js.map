{"version":3,"file":"src_app_tab4_tab4_module_ts.js","mappings":"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","sources":["./src/app/tab4/tab4-routing.module.ts","./src/app/tab4/tab4.module.ts","./src/app/tab4/tab4.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { Tab4Page } from './tab4.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab4Page\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class Tab4PageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { Tab4PageRoutingModule } from './tab4-routing.module';\n\nimport { Tab4Page } from './tab4.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    Tab4PageRoutingModule\n  ],\n  declarations: [Tab4Page]\n})\nexport class Tab4PageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AppModule } from '../app.module';\nimport { Device, DeviceInfo } from '@capacitor/device';\nimport { NavController } from '@ionic/angular';\nimport {\n  doc,\n  updateDoc,\n  Firestore,\n  getFirestore,\n  onSnapshot,\n  query,\n  collection,\n  where,\n} from 'firebase/firestore';\n@Component({\n  selector: 'app-tab4',\n  templateUrl: './tab4.page.html',\n  styleUrls: ['./tab4.page.scss'],\n})\nexport class Tab4Page implements OnInit {\n  db: Firestore;\n  numOfSent: number;\n  numOfSize: number;\n  numOfRev: number;\n  numOfSRev: number;\n\n  percent: number;\n  uid: string;\n  name: string;\n\n  constructor(private navCtrl: NavController) {\n    this.db = getFirestore(AppModule.app);\n    this.test();\n  }\n\n  ngOnInit() {}\n\n  async test() {\n    const info = await Device.getId();\n    const name = await Device.getInfo();\n    this.uid = info.uuid;\n    this.name = name.name;\n    onSnapshot(\n      doc(this.db, 'users', this.uid),\n      { includeMetadataChanges: true },\n      (data) => {\n        console.log(this.uid);\n        console.log(data.data());\n        this.getSize();\n        this.getRev();\n        this.numOfSize = data.data().numOfSize;\n        this.numOfSent = data.data().numOfSent;\n        this.numOfSent = data.data().numOfSent;\n        this.numOfRev = data.data().numOfRev;\n        this.numOfSRev = data.data().numOfSRev;\n\n      }\n    );\n  }\n  gotoContactPage() {\n    this.navCtrl.navigateForward('mycontact');\n  }\n\n  async getSize() {\n    const q = query(\n      collection(this.db, 'files'),\n      where('sender', '==', this.uid)\n    );\n\n    onSnapshot(q, (querySnapshot) => {\n      querySnapshot.forEach((data) => {\n        this.numOfSize += data.data().size / 10000;\n        this.percent = (this.numOfSize * 100) / 1024;\n      });\n      console.log('Current files : ', this.numOfSize);\n    });\n  }\n\n  async getRev() {\n    const q = query(\n      collection(this.db, 'files'),\n      where('receiver', '==', this.uid)\n    );\n    const amount = [];\n\n    onSnapshot(q, (querySnapshot) => {\n      querySnapshot.forEach((data) => {\n        amount.push(data.data().name);\n        this.numOfSRev += data.data().size/10000;\n      });\n      console.log('files : ', this.numOfRev);\n      this.numOfRev = amount.length;\n\n    });\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}
{"version":3,"file":"src_app_tab1_tab1_module_ts.js","mappings":"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","sources":["./src/app/tab1/tab1-routing.module.ts","./src/app/tab1/tab1.module.ts","./src/app/tab1/tab1.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab1Page } from './tab1.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab1Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab1PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab1Page } from './tab1.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab1PageRoutingModule } from './tab1-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab1PageRoutingModule\n  ],\n  declarations: [Tab1Page]\n})\nexport class Tab1PageModule {}\n","import { Component } from '@angular/core';\r\nimport { NavController, ToastController } from '@ionic/angular';\r\nimport {\r\n  doc,\r\n  setDoc,\r\n  updateDoc,\r\n  getFirestore,\r\n  Firestore,\r\n  collection,\r\n  query,\r\n  where,\r\n  onSnapshot,\r\n} from 'firebase/firestore';\r\nimport { Device, DeviceInfo } from '@capacitor/device';\r\nimport { AppModule } from '../app.module';\r\nimport { GetFile } from '../services/file';\r\n@Component({\r\n  selector: 'app-tab1',\r\n  templateUrl: 'tab1.page.html',\r\n  styleUrls: ['tab1.page.scss'],\r\n})\r\nexport class Tab1Page {\r\n  info = Device.getId();\r\n  db: Firestore;\r\n  file: File;\r\n  numOfSent: number;\r\n  numOfRev: number;\r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    private toastController: ToastController\r\n  ) {\r\n    this.db = getFirestore(AppModule.app);\r\n    this.setData();\r\n  }\r\n\r\n  onFileChange(fileChangeEvent) {\r\n    this.file = fileChangeEvent.target.files[0];\r\n    GetFile.fileCollect(fileChangeEvent);\r\n  }\r\n\r\n  downloadPage() {\r\n    this.navCtrl.navigateForward('upload');\r\n  }\r\n\r\n  async submitForm() {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('files', this.file, this.file.name);\r\n    } catch (e) {\r\n      this.presentToast(e);\r\n    }\r\n  }\r\n  gotoContactPage() {\r\n    this.navCtrl.navigateForward('mycontact');\r\n  }\r\n\r\n  async presentToast(error) {\r\n    const toast = await this.toastController.create({\r\n      message:\r\n        '<ion-icon name=\"rocket-outline\"></ion-icon> Flier [' +\r\n        error +\r\n        ']<ion-row class=\"ion-justify-content-center\">You not selected file.</ion-row>',\r\n      duration: 1500,\r\n      position: 'top',\r\n    });\r\n\r\n    await toast.present();\r\n  }\r\n\r\n  async setData() {\r\n    this.countDataSent();\r\n    this.countDataRev();\r\n    const info = await Device.getId();\r\n    if (this.numOfSent === undefined) {\r\n      this.numOfSent = 0;\r\n    }\r\n    if (this.numOfRev === undefined) {\r\n      this.numOfRev = 0;\r\n    }\r\n    setDoc(doc(this.db, 'users', `${info.uuid}`), {\r\n      numOfSent: this.numOfSent,\r\n      numOfSize: 0,\r\n      numOfSRev: 0,\r\n      numOfRev: this.numOfRev,\r\n      receive: 'off',\r\n    });\r\n  }\r\n\r\n  async countDataSent() {\r\n    {\r\n      const info = await Device.getId();\r\n      const q = query(\r\n        collection(this.db, 'files'),\r\n        where('sender', '==', `${info.uuid}`)\r\n      );\r\n\r\n      const send = onSnapshot(q, (querySnapshot) => {\r\n        const files = [];\r\n        querySnapshot.forEach((data) => {\r\n          console.log(data.data());\r\n          if (data.data().sender === info.uuid) {\r\n            files.push(data.data());\r\n          }\r\n        });\r\n        this.numOfSent = files.length;\r\n        console.log(this.numOfSent);\r\n        updateDoc(doc(this.db, 'users', `${info.uuid}`), {\r\n          numOfSent: this.numOfSent,\r\n        });\r\n      });\r\n    }\r\n  }\r\n  async countDataRev() {\r\n    const info = await Device.getId();\r\n    const q = query(\r\n      collection(this.db, 'files'),\r\n      where('receiver', '==', `${info.uuid}`)\r\n    );\r\n\r\n    onSnapshot(q, (querySnapshot) => {\r\n      querySnapshot.forEach((data) => {\r\n        console.log(data.data());\r\n        this.numOfRev += 1;\r\n      });\r\n       updateDoc(doc(this.db, 'users', `${info.uuid}`), {\r\n         numOfRev: this.numOfRev,\r\n       });\r\n    });\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}